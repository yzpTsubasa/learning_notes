{
    "$id": "https://tsubasaohzora.coding.net/p/notes/d/learning_notes/git/raw/master/schema/automator.schema.json?download=false",
    "$schema": "https://json-schema.org/draft-04/schema",
    "title": "Automator",
    "description": "Automator config by TsubasaYeung",
    "type": "array",
    "items": {"$ref": "#/definitions/command"},
    "definitions": {
        "common_data": {
            "properties": {
                "commands": {
                    "title": "命令集",
                    "type": "array",
                    "items": {"$ref": "#/definitions/command"}
                },
                "timeout": {"title": "延时"},
                "force": {"title": "强制执行"},
                "full_match": {"title": "保留完整匹配对象"},
                "flags": {"title": "flags"},
                "struct": {"title": "匹配结果的结构"},
                "options": {
                    "title": "额外选项",
                    "type": "object",
                    "properties": {
                        "rename": {
                            "anyOf": [
                                {"title": "新文件名", "type": "string"},
                                {
                                    "type": "object",
                                    "title": "重命名",
                                    "properties": {
                                        "base_trim_left": {"title": "修剪文件名左侧"},
                                        "base_trim_right": {"title": "修剪文件名右侧"},
                                        "dir_trim_left": {"title": "修剪路径左侧"},
                                        "dir_trim_right": {"title": "修剪路径右侧"},
                                        "dir_prefix": {"title": "添加路径前缀"},
                                        "dir_suffix": {"title": "添加路径后缀"},
                                        "base_prefix": {"title": "添加文件名前缀"},
                                        "base_suffix": {"title": "添加文件名后缀"}
                                    }
                                }
                            ]
                        },
                        "overwrite": {"title": "强制覆盖"},
                        "strategy": {"title": "策略", "enum": ["lazy", "hash", "force"]},
                        "strip_comments": {"title": "去除注释"}
                    }
                },
                "type": {"title": "类型"},
                "pattern": {"title": "正则表达式"},
                "cwd": {"title": "执行目录"},
                "content": {"title": "来源内容"},
                "content_print": {"title": "来源内容打印"},
                "content_confirm": {"title": "来源内容确认"},
                "parse_type": {"title": "结果值解析类型"},
                "value_type": {"title": "结果值转换类型"},
                "flatten": {"title": "数组扁平化", "type": "boolean"},
                "remove_duplicate": {"title": "数组去重", "type": "boolean"},
                "remove_duplicate_pattern": {"title": "数组去重正则表达式"},
                "remove_duplicate_prefix": {"title": "数组去重后添加前缀"},
                "remove_duplicate_suffix": {"title": "数组去重后添加后缀"},
                "store_trim": {"title": "字符串去除空白", "type": "boolean"},
                "default_value": {"title": "默认结果值"},
                "store_key_type": {"title": "结果值名称转换"},
                "store_mode": {
                    "title": "结果值保存模式",
                    "enum": ["default", "push", "unshift", "append", "merge", "concat"]
                },
                "store_dst_type": {"title": "结果值保存类型"},
                "reveal_dst": {"title": "显示结果值保存位置", "type": "boolean"},
                "open_dst": {"title": "打开结果值保存位置", "type": "boolean"},
                "mapping": {"title": "结果值解构映射保存"},
                "store_clipboard": {"title": "结果值写入剪切板", "type": "boolean"},
                "key": {"title": "来源值名称"},
                "src": {"title": "来源地址"},
                "base": {"title": "基础地址"},
                "dst": {"title": "目标地址"},
                "store_key": {"title": "结果值名称"},
                "store_dst": {"title": "结果值保存位置"},
                "store_print": {"title": "结果值打印"},
                "title": {"title": "标题"},
                "message": {"title": "消息内容"},
                "connection": {"title": "连接对象"},
                "query": {"title": "查询语句"},
                "no_glob": {"title": "不使用glob"},
                "only_file": {"title": "仅文件"},
                "cache_key": {"title": "本地缓存键"},
                "delimiter": {"title": "分隔符"},
                "props": {"title": "属性"},
                "lifetime": {"title": "生命周期(ms)"},
                "store_confirm": {"title": "结果值确认"}
            }
        },
        "common_cfg": {
            "properties": {
                "show_progress": {"title": "显示进度", "type": "boolean"},
                "ignore_error": {"title": "忽略错误", "type": "boolean"},
                "when": {"title": "代码执行结果值为true时执行"},
                "if_false": {"title": "结果值为false时执行"},
                "if_true": {"title": "结果值为true时执行"},
                "title": {"title": "标题"},
                "newline": {"title": "强制另起一行"},
                "log": {"title": "记录结果在日志中", "type": "boolean"},
                "required": {"title": "结果不能为空", "type": "boolean"},
                "automatic": {"type": "boolean", "title": "是否自动执行"}
            }
        },
        "command": {
            "anyOf": [
                {
                    "type": "object",
                    "properties": {
                        "type": {
                            "type": "string",
                            "title": "命令类型",
                            "enum": ["assemble", "disassemble", "read_cache", "write_cache", "stream", "ftp", "edit_excel", "write_excel", "read_only_excel", "mysql_connect", "mysql_end", "mysql_query", "write_query", "abort", "base", "confirm", "copy", "write_clipboard", "read_clipboard", "debugger", "exec_from_file", "files", "first_exist", "flatten", "git_commit", "git_export_diff_head", "git_is_dirty", "input", "list2dict", "loop", "loop_forever", "move", "modify", "open", "parse", "pause", "print", "read_cfg", "read_plain", "remove", "retrieve", "reveal", "sleep", "storage", "store", "storage_optional", "store_optional", "svn_commit", "svn_is_dirty", "svn_update", "svn_export_diff_head", "test", "truncate", "truncate_all", "void", "write_cfg", "write_plain", "zip", "valid_required", "continue", "break", "stringify", "commit", "export_diff_head", "is_dirty", "move_local", "alert", "interval", "traversal", "notify", "log", "file_info", "read_excel", "ts_sort", "divination", "suan_gua", "file_size", "updating_revision", "revision_info", "unzip", "download"]
                        },
                        "data": {
                            "type": "object",
                            "title": "命令参数",
                            "properties": {},
                            "allOf": [
                                {"$ref": "#/definitions/common_data"}
                            ]
                        }
                    },
                    "allOf": [
                        {"$ref": "#/definitions/common_cfg"}
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "type": {"const": "edit", "title": "编辑"},
                        "data": {
                            "type": "object",
                            "title": "命令参数",
                            "properties": {
                                "actions": {"title": "操作集"}
                            },
                            "allOf": [
                                {"$ref": "#/definitions/common_data"}
                            ]
                        }
                    },
                    "allOf": [
                        {"$ref": "#/definitions/common_cfg"}
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "type": {"const": "schedule", "title": "定时任务"},
                        "data": {
                            "type": "object",
                            "title": "命令参数",
                            "properties": {
                                "schedule_type": {
                                    "title": "定时类型",
                                    "enum": ["delay", "date"]
                                },
                                "value": {"title": "值"}
                            },
                            "required": ["schedule_type"],
                            "allOf": [
                                {"$ref": "#/definitions/common_data"}
                            ]
                        }
                    },
                    "allOf": [
                        {"$ref": "#/definitions/common_cfg"}
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "type": {
                            "enum": ["http_request", "request"],
                            "title": "http请求"
                        },
                        "data": {
                            "type": "object",
                            "title": "命令参数",
                            "properties": {
                                "target": {
                                    "type": "object",
                                    "properties": {
                                        "url": {"title": "请求地址"}
                                    }
                                },
                                "retry_times": {"title": "重试次数", "type": "number"},
                                "enable_cache": {"title": "启用缓存(类型)"},
                                "options": {
                                    "type": "object",
                                    "properties": {
                                        "method": {"title": "方式"}
                                    }
                                }
                            },
                            "allOf": [
                                {"$ref": "#/definitions/common_data"}
                            ]
                        }
                    },
                    "allOf": [
                        {"$ref": "#/definitions/common_cfg"}
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "type": {
                            "enum": ["select", "multi_select"],
                            "title": "选择"
                        },
                        "data": {
                            "type": "object",
                            "title": "命令参数",
                            "properties": {
                                "key_filter_pattern": {"title": "键过滤模式"},
                                "value_filter_pattern": {"title": "值过滤模式"},
                                "preview": {"title": "预览"},
                                "recommend_eval": {"title": "建议值-运行代码"},
                                "recommend": {
                                    "enum": ["first", "last", "middle", "random"],
                                    "title": "建议类型"
                                },
                                "recommend_context": {"title": "建议值模式依据的内容"},
                                "recommend_pattern": {"title": "建议值模式"},
                                "recommend_only_key": {"title": "建议值只判断键"},
                                "select_mode": {
                                    "title": "选择模式",
                                    "enum": ["key", "value", "index", "all"]
                                }
                            },
                            "allOf": [
                                {"$ref": "#/definitions/common_data"}
                            ]
                        }
                    },
                    "allOf": [
                        {"$ref": "#/definitions/common_cfg"}
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "type": {"const": "eval", "title": "运行代码"},
                        "data": {
                            "type": "object",
                            "title": "命令参数",
                            "properties": {
                                "code": {"title": "代码"}
                            },
                            "required": ["code"],
                            "allOf": [
                                {"$ref": "#/definitions/common_data"}
                            ]
                        }
                    },
                    "allOf": [
                        {"$ref": "#/definitions/common_cfg"}
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "type": {"const": "interval", "title": "间隔时间任务"},
                        "data": {
                            "type": "object",
                            "title": "命令参数",
                            "properties": {
                                "delay": {"title": "延时(毫秒)"},
                                "repeat": {"title": "总重复次数"},
                                "repeat_mapping": {"title": "总重复次数保存名称"},
                                "times_mapping": {"title": "已重复次数保存名称"}
                            },
                            "required": ["code"],
                            "allOf": [
                                {"$ref": "#/definitions/common_data"}
                            ]
                        }
                    },
                    "allOf": [
                        {"$ref": "#/definitions/common_cfg"}
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "type": {"const": "web_socket", "title": "连接websocket"},
                        "data": {
                            "type": "object",
                            "title": "命令参数",
                            "properties": {
                                "url": {"title": "连接地址"},
                                "protocols": {"title": "协议"},
                                "little_endian": {"title": "最低有效字节位于最前(小端)"},
                                "headers": {"title": "头部解析"},
                                "body_retrieval": {"title": "包体类型拼接"},
                                "bodies": {"title": "包体解析"},
                                "sends": {"title": "连接成功后发送"}
                            },
                            "required": ["url"],
                            "allOf": [
                                {"$ref": "#/definitions/common_data"}
                            ]
                        }
                    },
                    "allOf": [
                        {"$ref": "#/definitions/common_cfg"}
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "type": {
                            "enum": ["exec_shell", "shell"],
                            "title": "执行命令行"
                        },
                        "data": {
                            "type": "object",
                            "title": "命令参数",
                            "properties": {
                                "trim": {"title": "裁剪输出结果"},
                                "capture_stdout": {"title": "捕获输出"},
                                "ignore_code": {"title": "忽略错误码"},
                                "inputs": {"title": "输入"},
                                "encoding": {"title": "编码"},
                                "shell": {"title": "shell模式执行"},
                                "cmd": {"title": "命令行"}
                            },
                            "required": ["cmd"],
                            "allOf": [
                                {"$ref": "#/definitions/common_data"}
                            ]
                        }
                    },
                    "allOf": [
                        {"$ref": "#/definitions/common_cfg"}
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "type": {"const": "which", "title": "本机可执行文件"},
                        "data": {
                            "type": "object",
                            "title": "命令参数",
                            "properties": {
                                "target": {"title": "目标文件名"}
                            },
                            "required": ["target"],
                            "allOf": [
                                {"$ref": "#/definitions/common_data"}
                            ]
                        }
                    },
                    "allOf": [
                        {"$ref": "#/definitions/common_cfg"}
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "type": {"const": "date", "title": "日期"},
                        "data": {
                            "type": "object",
                            "title": "命令参数",
                            "properties": {
                                "format": {"title": "格式化模板"},
                                "date": {"title": "日期"},
                                "offset": {"title": "日期偏移"}
                            },
                            "required": ["format"],
                            "allOf": [
                                {"$ref": "#/definitions/common_data"}
                            ]
                        }
                    },
                    "allOf": [
                        {"$ref": "#/definitions/common_cfg"}
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "type": {"const": "loop", "title": "循环"},
                        "data": {
                            "type": "object",
                            "title": "命令参数",
                            "properties": {
                                "value_mapping": {"title": "循环值映射"},
                                "key_mapping": {"title": "循环键映射"},
                                "index_mapping": {"title": "循环索引映射"}
                            },
                            "allOf": [
                                {"$ref": "#/definitions/common_data"}
                            ]
                        }
                    },
                    "allOf": [
                        {"$ref": "#/definitions/common_cfg"}
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "type": {"const": "loop_forever", "title": "无限循环"},
                        "data": {
                            "type": "object",
                            "title": "命令参数",
                            "properties": {},
                            "allOf": [
                                {"$ref": "#/definitions/common_data"}
                            ]
                        }
                    },
                    "allOf": [
                        {"$ref": "#/definitions/common_cfg"}
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "type": {"const": "hash", "title": "散列值"},
                        "data": {
                            "type": "object",
                            "title": "命令参数",
                            "properties": {
                                "digestEncoding": {
                                    "title": "二进制摘要的文本编码",
                                    "enum": ["base64", "hex"]
                                },
                                "algorithm": {
                                    "title": "算法",
                                    "enum": ["blake2b512", "blake2s256", "md4", "md5", "md5-sha1", "mdc2", "ripemd160", "rsa-sha1", "sha1", "sha224", "sha256", "sha3-224", "sha3-256", "sha3-384", "sha3-512", "sha384", "sha512", "sha512-224", "sha512-256", "shake128", "shake256", "sm3", "whirlpool"]
                                }
                            },
                            "allOf": [
                                {"$ref": "#/definitions/common_data"}
                            ]
                        }
                    },
                    "allOf": [
                        {"$ref": "#/definitions/common_cfg"}
                    ]
                },
                {
                    "type": "object",
                    "properties": {
                        "type": {"const": "tencent_cos", "title": "腾讯云"},
                        "data": {
                            "type": "object",
                            "title": "命令参数",
                            "properties": {
                                "config": {
                                    "type": "object",
                                    "title": "腾讯云配置",
                                    "properties": {
                                        "secret_id": {
                                            "type": "string",
                                            "title": "秘钥ID"
                                        },
                                        "secret_key": {
                                            "type": "string",
                                            "title": "秘钥键"
                                        },
                                        "bucket": {
                                            "type": "string",
                                            "title": "仓库"
                                        },
                                        "appid": {
                                            "type": "string",
                                            "title": "产品id"
                                        },
                                        "region": {
                                            "type": "string",
                                            "title": "区域"
                                        }
                                    }
                                },
                                "mode": {
                                    "title": "模式",
                                    "enum": ["VIEW", "DOWNLOAD", "UPLOAD_FILE", "UPLOAD", "UPLOAD_FILES"]
                                }
                            },
                            "allOf": [
                                {"$ref": "#/definitions/common_data"}
                            ]
                        }
                    },
                    "allOf": [
                        {"$ref": "#/definitions/common_cfg"}
                    ]
                },
                {
                    "type": "string",
                    "title": "命令类型",
                    "enum": ["abort", "base", "confirm", "copy", "write_clipboard", "read_clipboard", "date", "debugger", "eval", "exec_from_file", "exec_shell", "files", "first_exist", "flatten", "git_commit", "git_export_diff_head", "git_is_dirty", "http_request", "input", "list2dict", "loop", "loop_forever", "move", "multi_select", "modify", "open", "parse", "pause", "print", "read_cfg", "read_plain", "remove", "request", "retrieve", "reveal", "select", "shell", "sleep", "storage", "store", "storage_optional", "store_optional", "svn_commit", "svn_is_dirty", "svn_update", "svn_export_diff_head", "test", "truncate", "truncate_all", "void", "write_cfg", "write_plain", "zip", "valid_required", "continue", "break", "stringify", "commit", "export_diff_head", "is_dirty", "which", "move_local", "edit", "schedule", "alert", "interval", "traversal", "notify", "log", "file_info", "read_excel", "web_socket", "ts_sort", "divination", "suan_gua", "file_size", "hash"]
                }
            ]
        }
    }
}